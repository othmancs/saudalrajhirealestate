<?xml version="1.0" encoding="UTF-8"?>
<t t-name="rental_reports.rental_report_template">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="doc">
            <div class="header">
                <h1>Rental Units Report</h1>
                <div class="filters">
                    <p><strong>Company:</strong> <span t-esc="doc.company_id.name"/></p>
                    <p><strong>Operating Unit:</strong> <span t-esc="doc.operating_unit_id.name"/></p>
                    <p><strong>Building Address:</strong> <span t-esc="doc.property_address_build"/></p>
                    <p><strong>Property:</strong> <span t-esc="doc.property_id.name"/></p>
                </div>
            </div>
            
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Unit Number</th>
                        <th>Tenant</th>
                        <th>Contract Number</th>
                        <th>Status</th>
                        <th>Amount Paid</th>
                        <th>Amount Due</th>
                        <th>Total Contract</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Admin Fees</th>
                        <th>Admin Sub Fees</th>
                        <th>Service Fees</th>
                        <th>Service Sub Fees</th>
                        <th>Insurance Value</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="doc.search([])" t-as="unit">
                        <tr>
                            <td><span t-esc="unit.name"/></td>
                            <td><span t-esc="unit.partner_id.name"/></td>
                            <td><span t-esc="unit.last_sale_id.name"/></td>
                            <td><span t-esc="unit.state_id.name"/></td>
                            <td><span t-esc="unit.amount_paid"/></td>
                            <td><span t-esc="unit.amount_due"/></td>
                            <td><span t-esc="unit.contract_total"/></td>
                            <td><span t-esc="unit.fromdate"/></td>
                            <td><span t-esc="unit.todate"/></td>
                            <td><span t-esc="unit.contract_admin_fees"/></td>
                            <td><span t-esc="unit.contract_admin_sub_fees"/></td>
                            <td><span t-esc="unit.contract_service_fees"/></td>
                            <td><span t-esc="unit.contract_service_sub_fees"/></td>
                            <td><span t-esc="unit.insurance_value"/></td>
                        </tr>
                    </t>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4"><strong>Totals</strong></td>
                        <td><strong t-esc="sum(unit.amount_paid for unit in doc.search([]))"/></td>
                        <td><strong t-esc="sum(unit.amount_due for unit in doc.search([]))"/></td>
                        <td><strong t-esc="sum(unit.contract_total for unit in doc.search([]))"/></td>
                        <td colspan="2"></td>
                        <td><strong t-esc="sum(unit.contract_admin_fees for unit in doc.search([]))"/></td>
                        <td><strong t-esc="sum(unit.contract_admin_sub_fees for unit in doc.search([]))"/></td>
                        <td><strong t-esc="sum(unit.contract_service_fees for unit in doc.search([]))"/></td>
                        <td><strong t-esc="sum(unit.contract_service_sub_fees for unit in doc.search([]))"/></td>
                        <td><strong t-esc="sum(unit.insurance_value for unit in doc.search([]))"/></td>
                    </tr>
                </tfoot>
            </table>
        </t>
    </t>
</t>