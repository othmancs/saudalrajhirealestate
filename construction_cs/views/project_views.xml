<odoo>
    <!-- نموذج عرض المشروع -->
    <record id="view_construction_project_form" model="ir.ui.view">
        <field name="name">construction.project.form</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="project_type" invisible="1"/>
                <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                <field name="completion_percentage" widget="progressbar"/>
            </xpath>
        </field>
    </record>

    <!-- نموذج عرض المهمة -->
    <record id="view_construction_task_form" model="ir.ui.view">
        <field name="name">construction.task.form</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="inside">
                <group string="Construction Details" col="4">
                    <field name="stage_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                </group>
                <notebook>
                    <page string="Materials">
                        <field name="material_ids" context="{'default_task_id': id}">
                            <tree editable="bottom">
                                <field name="product_id"/>
                                <field name="quantity"/>
                                <field name="uom_id"/>
                                <field name="cost_per_unit" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </tree>
                            <form>
                                <group>
                                    <field name="product_id"/>
                                    <field name="quantity"/>
                                    <field name="uom_id"/>
                                    <field name="cost_per_unit" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </group>
                            </form>
                        </field>
                    </page>
                    <page string="Labor">
                        <field name="labor_ids" context="{'default_task_id': id}">
                            <tree editable="bottom">
                                <field name="employee_id"/>
                                <field name="hours"/>
                                <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </tree>
                            <form>
                                <group>
                                    <field name="employee_id"/>
                                    <field name="hours"/>
                                    <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </group>
                            </form>
                        </field>
                    </page>
                    <page string="Equipment">
                        <field name="equipment_ids" context="{'default_task_id': id}">
                            <tree editable="bottom">
                                <field name="equipment_id"/>
                                <field name="hours"/>
                                <field name="hourly_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </tree>
                            <form>
                                <group>
                                    <field name="equipment_id"/>
                                    <field name="hours"/>
                                    <field name="hourly_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </group>
                            </form>
                        </field>
                    </page>
                </notebook>
            </xpath>
        </field>
    </record>

    <!-- عرض شجرة المشاريع -->
    <record id="view_construction_project_tree" model="ir.ui.view">
        <field name="name">construction.project.tree</field>
        <field name="model">project.project</field>
        <field name="arch" type="xml">
            <tree string="Construction Projects">
                <field name="name"/>
                <field name="total_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                <field name="completion_percentage" widget="progressbar"/>
            </tree>
        </field>
    </record>
</odoo>
